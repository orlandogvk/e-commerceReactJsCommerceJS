[{"C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\Basket\\index.jsx":"1","C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\Spinner\\index.jsx":"2","C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\Basket\\Banner.jsx":"3","C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\App.jsx":"4","C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\Banner\\index.jsx":"5","C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\Footer\\index.jsx":"6","C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\NavBar\\index.jsx":"7","C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\Checkout\\index.jsx":"8","C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\Checkout\\CheckoutForm.jsx":"9","C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\index.js":"10","C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\Products\\index.jsx":"11","C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\lib\\commerce.js":"12","C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\Checkout\\Payment.jsx":"13","C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\Product\\index.jsx":"14","C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\Checkout\\Confirmation.jsx":"15","C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\Checkout\\BookingDetails.jsx":"16","C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\Checkout\\helpers.js":"17","C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\CustomCard\\index.jsx":"18"},{"size":1680,"mtime":1611555398473,"results":"19","hashOfConfig":"20"},{"size":194,"mtime":1611525645253,"results":"21","hashOfConfig":"20"},{"size":871,"mtime":1611554191466,"results":"22","hashOfConfig":"20"},{"size":3231,"mtime":1611547529003,"results":"23","hashOfConfig":"20"},{"size":756,"mtime":1611451128254,"results":"24","hashOfConfig":"20"},{"size":308,"mtime":1611451672031,"results":"25","hashOfConfig":"20"},{"size":1847,"mtime":1611458568791,"results":"26","hashOfConfig":"20"},{"size":7878,"mtime":1611553718905,"results":"27","hashOfConfig":"20"},{"size":5042,"mtime":1611553496030,"results":"28","hashOfConfig":"20"},{"size":222,"mtime":1611350620625,"results":"29","hashOfConfig":"20"},{"size":964,"mtime":1611452641724,"results":"30","hashOfConfig":"20"},{"size":144,"mtime":1611360279580,"results":"31","hashOfConfig":"20"},{"size":2518,"mtime":1611542876789,"results":"32","hashOfConfig":"20"},{"size":266,"mtime":1611555713497,"results":"33","hashOfConfig":"20"},{"size":822,"mtime":1611542812499,"results":"34","hashOfConfig":"20"},{"size":1275,"mtime":1611553413091,"results":"35","hashOfConfig":"20"},{"size":1459,"mtime":1611552507328,"results":"36","hashOfConfig":"20"},{"size":3228,"mtime":1611556228007,"results":"37","hashOfConfig":"20"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"wbe0nw",{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"45","messages":"46","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"47"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"55","messages":"56","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"57","usedDeprecatedRules":"42"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\Basket\\index.jsx",[],"C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\Spinner\\index.jsx",[],["79","80"],"C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\Basket\\Banner.jsx",[],"C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\App.jsx",["81","82"],"import { useState, useEffect } from 'react';\nimport { commerce } from './lib/commerce'\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport Products from './components/Products';\nimport NavBar from './components/NavBar';\nimport Footer from './components/Footer';\nimport Basket from './components/Basket';\nimport Checkout from './components/Checkout';\n\nconst App = () => {\n\n  const [products, setProducts] = useState([])\n  const [basketdata, setBasketData] = useState([])\n  const [orderInfo, setOrderInfo] = useState({});\n  const [orderError, setOrderError] = useState(\"\");\n\n  const fecthProducts = async () => {\n    const response = await commerce.products.list();\n    setProducts((response && response.data || []));\n  };\n\n  const fecthBasketData = async () =>{\n    const response = await commerce.cart.retrieve();\n    setBasketData(response);\n  }\n\n  useEffect(() => {\n    fecthProducts();\n    fecthBasketData();\n  }, [])\n\n  const addProduct = async (productId, quantity) => {\n    const response = await commerce.cart.add(productId, quantity);\n    setBasketData(response.cart);\n  }; \n\n  const updateProduct = async (productId, quantity) => {\n    const response = await commerce.cart.update(productId, { quantity });\n    setBasketData(response.cart);\n  };\n\n  const handleEmptyBasket = async () => {\n    const response = await commerce.cart.empty();\n    setBasketData(response.cart);\n  };\n\n  const RemoveItemFromBasket = async (itemId) => {\n    const response = await commerce.cart.remove(itemId);\n    setBasketData(response.cart);\n  };\n\n  const refreshBasket = async () => {\n    const newBasketData = await commerce.cart.refresh();\n    setBasketData(newBasketData);\n  };\n\n  const handleCheckout = async (checkoutId, orderData) => {\n    try {\n      // const incomingOrder = await commerce.checkout.capture(\n      //   checkoutId,\n      //   orderData\n      // );\n\n      setOrderInfo(orderData);\n\n      refreshBasket();\n    } catch (error) {\n      setOrderError(\n        (error.data && error.data.error && error.data.error.message) ||\n          \"There is an error occurred\"\n      );\n    }\n  };\n\n  console.log(\"basketdata====\",basketdata)\n  return (\n    <Router>\n        <div>\n            <NavBar basketItems={basketdata.total_items} totalCost={\n              (basketdata.subtotal && basketdata.subtotal.formatted_with_symbol) || \"00.00\"\n            } />\n            <Switch>\n              <Route exact path=\"/\">\n                 <Products products={products} addProduct={addProduct}/>\n              </Route>\n              <Route exact path=\"/basket\">\n                  <Basket \n                  basketData={basketdata}\n                  updateProduct={updateProduct}\n                  handleEmptyBasket={handleEmptyBasket}\n                  RemoveItemFromBasket={RemoveItemFromBasket}\n                  />\n              </Route>\n              <Route exact path=\"/checkout\">\n                  <Checkout\n                  orderInfo={orderInfo}\n                  orderError={orderError} \n                  basketdata={basketdata}\n                  handleCheckout={handleCheckout}/>\n              </Route>\n            </Switch>\n            <Footer/>\n        </div>\n    </Router>\n\n  );\n}\n\nexport default App;\n","C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\Banner\\index.jsx",[],"C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\Footer\\index.jsx",[],["83","84"],"C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\NavBar\\index.jsx",[],"C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\Checkout\\index.jsx",["85","86"],"import { useState, useEffect, useRef } from \"react\";\r\nimport { Container, Paper, Typography, CircularProgress, Step, Stepper, StepLabel } from '@material-ui/core'\r\nimport './style.css'\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { commerce } from \"../../lib/commerce\";\r\nimport CheckoutForm from \"./CheckoutForm\";\r\nimport BookingDetails from \"./BookingDetails\";\r\nimport { renderRelatedComponent } from './helpers';\r\n\r\nconst steps = [\"datos del pedido\", \"detalles del pedido\", \"pago del pedido\"]\r\n\r\nconst convertObjectToArray = (countries) =>\r\n    Object.entries(countries || {}).map(([code, name]) => ({ code, name }));\r\n\r\nconst usePreviousState = (value) => {\r\n    const ref = useRef();\r\n    useEffect(() => {\r\n        ref.current = value;\r\n    });\r\n    return ref.current;\r\n};\r\n\r\n\r\nconst Checkout = ({ basketdata, orderInfo, orderError, handleCheckout }) => {\r\n    const [user, setUser] = useState({\r\n        city: \"\",\r\n        email: \"\",\r\n        address: \"\",\r\n        postCode: \"\",\r\n        lastName: \"\",\r\n        firstName: \"\",\r\n        shippingOption: {},\r\n        shippingOptions: [],\r\n        shippingCountry: {},\r\n        shippingCountries: [],\r\n        shippingSubdivision: {},\r\n        shippingSubdivisions: [],\r\n    });\r\n\r\n    const [bookingStep, setBookingStep] = useState(\"datos del pedido\");\r\n    const [checkoutData, setCheckoutData] = useState(\"\");\r\n\r\n    const previousShippingCountry = usePreviousState(user.shippingCountry);\r\n    const previousShippingSubdivision = usePreviousState(\r\n        user.shippingSubdivision\r\n    );\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setUser({ ...user, [name]: value });\r\n    }\r\n\r\n    const handleSelectChange = (e, state) => {\r\n        const { name, value } = e.target;\r\n        if (state === \"shippingOptions\") {\r\n            setUser({\r\n                ...user,\r\n                [name]: {\r\n                    id: value,\r\n                },\r\n            });\r\n        } else {\r\n            setUser({\r\n                ...user,\r\n                [name]: {\r\n                    name: user[state].find((country) => country.code === value).name,\r\n                    code: value,\r\n                },\r\n            });\r\n        }\r\n    };\r\n\r\n    const history = useHistory();\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        setBookingStep(\"detalles del pedido\");\r\n    };\r\n\r\n    const handleNextStep = (e, step) => {\r\n        e.preventDefault();\r\n        setBookingStep(step);\r\n    };\r\n\r\n    const handleBackStep = (e, step) => {\r\n        e.preventDefault();\r\n        setBookingStep(step);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (basketdata.id) {\r\n            const generateToken = async () => {\r\n                try {\r\n                    const response = await commerce.checkout.generateToken(\r\n                        basketdata.id,\r\n                        {\r\n                            type: \"cart\",\r\n                        }\r\n                    );\r\n                    setCheckoutData(response);\r\n                } catch (error) {\r\n                    console.error(\"Checkout error: \", error);\r\n                }\r\n            };\r\n            generateToken();\r\n        }\r\n    }, [basketdata, history]);\r\n\r\n    useEffect(() => {\r\n        const fetchShippingCountries = async () => {\r\n            const { countries } = await commerce.services.localeListShippingCountries(\r\n                checkoutData.id\r\n            );\r\n            const FormattedCountries = convertObjectToArray(countries);\r\n            setUser({\r\n                ...user,\r\n                shippingCountries: FormattedCountries,\r\n                shippingCountry: FormattedCountries[FormattedCountries.length - 1],\r\n            });\r\n        };\r\n        if (!user.shippingCountries.length && checkoutData.id) {\r\n            fetchShippingCountries();\r\n        }\r\n    }, [user, checkoutData]);\r\n\r\n    useEffect(() => {\r\n        const fetchSubdivisions = async (countryCode) => {\r\n            const { subdivisions } = await commerce.services.localeListSubdivisions(\r\n                countryCode\r\n            );\r\n\r\n            const shippingSubdivisions = convertObjectToArray(subdivisions);\r\n            setUser({\r\n                ...user,\r\n                shippingSubdivisions,\r\n                shippingSubdivision: shippingSubdivisions[0],\r\n            });\r\n        };\r\n\r\n        if (\r\n            (user.shippingCountry.code && !user.shippingSubdivisions.length) ||\r\n            (previousShippingCountry &&\r\n                previousShippingCountry.code !== user.shippingCountry.code)\r\n        )\r\n            fetchSubdivisions(user.shippingCountry.code);\r\n    }, [user, previousShippingCountry]);\r\n\r\n\r\n    useEffect(() => {\r\n        const fetchShippingOptions = async (\r\n            checkoutDataId,\r\n            country,\r\n            stateProvince = null\r\n        ) => {\r\n            const options = await commerce.checkout.getShippingOptions(\r\n                checkoutDataId,\r\n                {\r\n                    country,\r\n                    region: stateProvince,\r\n                }\r\n            );\r\n\r\n            setUser({\r\n                ...user,\r\n                shippingOptions: options,\r\n                shippingOption: { id: options[0].id },\r\n            });\r\n        };\r\n\r\n        if (\r\n            (user.shippingSubdivision.code && !user.shippingOptions.length) ||\r\n            (previousShippingSubdivision &&\r\n                previousShippingSubdivision.code !== user.shippingSubdivision.code)\r\n        )\r\n            fetchShippingOptions(\r\n                checkoutData.id,\r\n                user.shippingCountry.code,\r\n                user.shippingSubdivision.code\r\n            );\r\n    }, [\r\n        user,\r\n        checkoutData.id,\r\n        user.shippingCountry.code,\r\n        user.shippingSubdivision,\r\n        previousShippingSubdivision,\r\n    ]);\r\n\r\n    if (\r\n        !user.shippingSubdivisions.length ||\r\n        !user.shippingCountries.length ||\r\n        !user.shippingOptions.length ||\r\n        !checkoutData.live\r\n    ) {\r\n        return (\r\n            <div className=\"checkout\">\r\n                <Container>\r\n                    <Paper className=\"paper\" elevation={3}>\r\n                        <div className=\"products-spinner\">\r\n                            <CircularProgress />\r\n                        </div>\r\n                    </Paper>\r\n                </Container>\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"checkout\">\r\n            <Container>\r\n                <Paper className=\"paper\" elevation={3}>\r\n                    <Typography align=\"center\" variant=\"h5\" gutterBottom>\r\n                        Checkout\r\n                    </Typography>\r\n                    {bookingStep !== \"confirmation\" && (\r\n                        <Stepper\r\n                            className=\"stepper\"\r\n                            activeStep={steps.indexOf(bookingStep)}\r\n                        >\r\n                            {steps.map((label) => (\r\n                                <Step key={label}>\r\n                                    <StepLabel>{label}</StepLabel>\r\n                                </Step>\r\n                            ))}\r\n                        </Stepper>\r\n                    )}\r\n                    {renderRelatedComponent({\r\n                        user,\r\n                        orderInfo,\r\n                        orderError,\r\n                        bookingStep,\r\n                        handleChange,\r\n                        handleSubmit,\r\n                        checkoutData,\r\n                        handleBackStep,\r\n                        handleNextStep,\r\n                        handleCheckout,\r\n                        handleSelectChange,\r\n                    })}\r\n                </Paper>\r\n            </Container>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Checkout;\r\n","C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\Checkout\\CheckoutForm.jsx",[],"C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\index.js",[],["87","88"],"C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\Products\\index.jsx",[],"C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\lib\\commerce.js",[],"C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\Checkout\\Payment.jsx",[],"C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\Product\\index.jsx",[],"C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\Checkout\\Confirmation.jsx",[],"C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\Checkout\\BookingDetails.jsx",[],"C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\Checkout\\helpers.js",[],"C:\\Users\\Usuario\\Desktop\\shopping\\e_shopping\\src\\components\\CustomCard\\index.jsx",[],{"ruleId":"89","replacedBy":"90"},{"ruleId":"91","replacedBy":"92"},{"ruleId":"93","severity":1,"message":"94","line":19,"column":27,"nodeType":"95","messageId":"96","endLine":19,"endColumn":29},{"ruleId":"93","severity":1,"message":"94","line":19,"column":44,"nodeType":"95","messageId":"96","endLine":19,"endColumn":46},{"ruleId":"89","replacedBy":"97"},{"ruleId":"91","replacedBy":"98"},{"ruleId":"99","severity":1,"message":"100","line":6,"column":8,"nodeType":"101","messageId":"102","endLine":6,"endColumn":20},{"ruleId":"99","severity":1,"message":"103","line":7,"column":8,"nodeType":"101","messageId":"102","endLine":7,"endColumn":22},{"ruleId":"89","replacedBy":"104"},{"ruleId":"91","replacedBy":"105"},"no-native-reassign",["106"],"no-negated-in-lhs",["107"],"no-mixed-operators","Unexpected mix of '&&' and '||'.","LogicalExpression","unexpectedMixedOperator",["106"],["107"],"no-unused-vars","'CheckoutForm' is defined but never used.","Identifier","unusedVar","'BookingDetails' is defined but never used.",["106"],["107"],"no-global-assign","no-unsafe-negation"]